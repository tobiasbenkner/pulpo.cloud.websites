---
import Container from "./ui/Container.astro";
import { getTranslatedPath } from "@/lib/registry";
import type { Language } from "@/lib/i18n";
import { siteData } from "@/data/siteData";

interface Props {
  lang: Language;
}

const { lang } = Astro.props;
const currentYear = new Date().getFullYear();

const footerLinks = [
  {
    key: "legal",
    label: { es: "Aviso Legal", de: "Impressum", en: "Legal Notice" },
  },
  {
    key: "privacy",
    label: { es: "Privacidad", de: "Datenschutz", en: "Privacy" },
  },
  {
    key: "cookies",
    label: { es: "Cookies", de: "Cookies", en: "Cookies" },
  },
] as const;
---

<footer class="border-t border-border/50 bg-surface mt-auto">
  <Container class="py-8">
    <div
      class="flex flex-col-reverse md:flex-row justify-between items-center gap-6"
    >
      <!-- Copyright -->
      <p class="text-sm text-text-muted text-center md:text-left">
        &copy; {currentYear} {siteData.meta.name}. All rights reserved.
      </p>

      <!-- Legal Links -->
      <nav class="flex flex-wrap justify-center gap-x-6 gap-y-2">
        {
          footerLinks.map((link) => {
            const href = getTranslatedPath(link.key, lang);
            // Fallback, falls Route nicht gefunden (z.B. noch nicht registriert), damit es nicht crasht
            if (href === "/404") return null;

            return (
              <a
                href={href}
                class="text-sm text-text-muted hover:text-secondary transition-colors duration-200"
              >
                {link.label[lang]}
              </a>
            );
          })
        }
      </nav>
    </div>
  </Container>
</footer>
