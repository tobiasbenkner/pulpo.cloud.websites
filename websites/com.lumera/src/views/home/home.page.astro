---
import type { HomeTranslations } from "./home.i18n";
import type { Language } from "@/lib/i18n";
import { siteData } from "@/data/site";
import { Image } from "astro:assets";

import gallery01 from "@/assets/gallery/01.jpg";
import gallery02 from "@/assets/gallery/02.jpg";
import gallery03 from "@/assets/gallery/03.jpg";
import gallery04 from "@/assets/gallery/04.jpg";
import gallery05 from "@/assets/gallery/05.jpg";
import gallery06 from "@/assets/gallery/06.jpg";

const galleryImages = [gallery01, gallery02, gallery03, gallery04, gallery05, gallery06];

interface Props {
  lang: Language;
  t: HomeTranslations;
}

const { lang, t } = Astro.props;

const aboutParagraphs = t.about.text.split("\n\n");
const taglineLines = t.hero.tagline.split("\n");
const contactLines = t.contact.text.split("\n");
const manifestLines = t.manifest.quote.split("\n");
---

<!-- Hero -->
<section
  class="flex items-center justify-center min-h-[100dvh] -mt-16 md:-mt-20 px-6 text-center"
>
  <div class="fade-in-section">
    <h1 class="text-6xl sm:text-7xl md:text-8xl lg:text-9xl font-serif tracking-wide text-primary">
      LUMERA
    </h1>
    <p class="mt-4 text-xs sm:text-sm tracking-[0.35em] uppercase text-text-muted">
      {t.hero.subtitle}
    </p>
    <div class="mx-auto mt-8 w-12 border-t border-border"></div>
    <p class="mt-8 font-serif italic text-lg sm:text-xl text-text-muted max-w-md mx-auto leading-relaxed">
      {taglineLines.map((line, i) => (
        <Fragment>
          {i > 0 && <br />}
          {line}
        </Fragment>
      ))}
    </p>
    <p class="mt-6 text-[10px] sm:text-xs tracking-[0.3em] uppercase text-text-muted/60">
      {t.hero.motto}
    </p>
  </div>
</section>

<!-- About -->
<section class="py-24 sm:py-32 px-6">
  <div class="max-w-2xl mx-auto text-center fade-in-section">
    <h2 class="text-3xl sm:text-4xl font-serif text-primary mb-10">
      {t.about.heading}
    </h2>
    <div class="space-y-6 text-base sm:text-lg leading-relaxed text-text-muted">
      {aboutParagraphs.map((p) => <p>{p}</p>)}
    </div>
    <p class="mt-10 font-serif italic text-lg sm:text-xl text-secondary">
      {t.about.quote}
    </p>
  </div>
</section>

<!-- Gallery -->
<section class="py-24 sm:py-32 px-6">
  <div class="max-w-5xl mx-auto fade-in-section">
    <h2 class="text-3xl sm:text-4xl font-serif text-primary text-center mb-14">
      {t.gallery.heading}
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
      {galleryImages.map((img, i) => (
        <div class="aspect-[3/4] overflow-hidden rounded-sm">
          <Image
            src={img}
            alt={`Portrait ${i + 1}`}
            widths={[400, 600, 800]}
            sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
            class="h-full w-full object-cover"
            loading={i < 3 ? "eager" : "lazy"}
          />
        </div>
      ))}
    </div>
  </div>
</section>

<!-- Contact -->
<section class="py-24 sm:py-32 px-6">
  <div class="max-w-xl mx-auto text-center fade-in-section">
    <h2 class="text-3xl sm:text-4xl font-serif text-primary mb-8">
      {t.contact.heading}
    </h2>
    <p class="text-base sm:text-lg text-text-muted leading-relaxed mb-10">
      {contactLines.map((line, i) => (
        <Fragment>
          {i > 0 && <br />}
          {line}
        </Fragment>
      ))}
    </p>
    <div class="flex items-center justify-center gap-8 text-sm sm:text-base">
      <a
        href={`mailto:${siteData.contact.email}`}
        class="text-secondary hover:text-primary transition-colors duration-200"
      >
        {siteData.contact.email}
      </a>
      <span class="text-border">|</span>
      <a
        href={siteData.social.instagram}
        target="_blank"
        rel="noopener noreferrer"
        class="text-secondary hover:text-primary transition-colors duration-200"
      >
        Instagram
      </a>
    </div>
  </div>
</section>

<!-- Manifest -->
<section class="py-24 sm:py-32 px-6 border-t border-border/50">
  <div class="max-w-2xl mx-auto text-center fade-in-section">
    <p class="font-serif italic text-xl sm:text-2xl md:text-3xl text-text-muted leading-relaxed">
      {manifestLines.map((line, i) => (
        <Fragment>
          {i > 0 && <br />}
          {line}
        </Fragment>
      ))}
    </p>
    <p class="mt-8 text-xs tracking-[0.3em] uppercase text-text-muted/50">
      {t.manifest.tagline}
    </p>
  </div>
</section>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.15 }
  );

  document.querySelectorAll(".fade-in-section").forEach((el) => {
    observer.observe(el);
  });
</script>
