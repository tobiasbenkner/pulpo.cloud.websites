---
import { Image } from "astro:assets";
import scheduleImage from "../assets/schedule-2026.jpg";
import siteData from "../data/site.json";

interface Props {
  t: any;
}
const { t } = Astro.props;
---

<section id="schedule" class="py-32 bg-vibra-surface">
  <div class="max-w-6xl mx-auto px-6 text-center">
    <h2 class="text-3xl md:text-4xl mb-12 uppercase tracking-widest font-light">
      {t.schedule.title}
    </h2>

    <div
      class="bg-[#14142a] p-4 shadow-luxury inline-block cursor-pointer"
      id="schedule-trigger"
    >
      <Image
        src={scheduleImage}
        alt="Vibra Dance Stundenplan 2026"
        class="w-full max-w-5xl h-auto block"
        quality="high"
      />
    </div>

    <div
      id="schedule-lightbox"
      class="fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm hidden items-center justify-center p-6 cursor-pointer"
    >
      <button
        type="button"
        aria-label="Close"
        class="absolute top-6 right-6 text-white/60 hover:text-white transition-colors"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path d="M18 6 6 18M6 6l12 12"></path>
        </svg>
      </button>
      <Image
        src={scheduleImage}
        alt="Vibra Dance Stundenplan 2026"
        class="max-w-full max-h-full object-contain"
        quality="high"
        widths={[1200, 1600]}
        sizes="100vw"
      />
    </div>
    <p class="mt-8 text-sm text-gray-500">
      {t.schedule.location_note}
      {siteData.location.complex}, {siteData.location.street}.
    </p>
  </div>
</section>

<script>
  const trigger = document.getElementById("schedule-trigger")!;
  const lightbox = document.getElementById("schedule-lightbox")!;

  trigger.addEventListener("click", () => {
    lightbox.classList.remove("hidden");
    lightbox.classList.add("flex");
    document.body.style.overflow = "hidden";
  });

  lightbox.addEventListener("click", () => {
    lightbox.classList.add("hidden");
    lightbox.classList.remove("flex");
    document.body.style.overflow = "";
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !lightbox.classList.contains("hidden")) {
      lightbox.classList.add("hidden");
      lightbox.classList.remove("flex");
      document.body.style.overflow = "";
    }
  });
</script>
