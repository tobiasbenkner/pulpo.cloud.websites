---
import { Image } from "astro:assets";
import Container from "@/components/ui/Container.astro";
import { Icon } from "astro-icon/components";
import type { HomeTranslations } from "./home.i18n";
import { getTranslatedPath } from "@/lib/registry";
import type { Language } from "@/lib/i18n";
import hero from "../../assets/hero.webp";

// Import insurer logos
import allianzLogo from "@/assets/insurers/allianz.png";
import asisaLogo from "@/assets/insurers/asisa.png";
import axaLogo from "@/assets/insurers/axa.jpg";
import divinaLogo from "@/assets/insurers/divina.png";
import dkvLogo from "@/assets/insurers/dkv.webp";
import euroinsLogo from "@/assets/insurers/euroins.webp";
import fiatcLogo from "@/assets/insurers/fiatc.webp";
import generaliLogo from "@/assets/insurers/generali.png";
import hiscoxLogo from "@/assets/insurers/hiscox.png";
import life5Logo from "@/assets/insurers/life5.png";
import mapfreLogo from "@/assets/insurers/mapfre.png";
import mutuaPropietariosLogo from "@/assets/insurers/mutua-propietarios.png";
import hnaLogo from "@/assets/insurers/hna.webp";
import occidentLogo from "@/assets/insurers/occident.webp";
import santaluciaLogo from "@/assets/insurers/santalucia.png";

interface Props {
  lang: Language;
  t: HomeTranslations;
}

const { lang, t } = Astro.props;

const insurerLogos = [
  { name: "Allianz", logo: allianzLogo },
  { name: "ASISA", logo: asisaLogo },
  { name: "AXA", logo: axaLogo },
  { name: "Divina", logo: divinaLogo },
  { name: "DKV", logo: dkvLogo },
  { name: "Euroins", logo: euroinsLogo },
  { name: "FIATC", logo: fiatcLogo },
  { name: "Generali", logo: generaliLogo },
  { name: "Hiscox", logo: hiscoxLogo },
  { name: "Life 5", logo: life5Logo },
  { name: "Mapfre", logo: mapfreLogo },
  { name: "Mutua de Propietarios", logo: mutuaPropietariosLogo },
  { name: "HNA", logo: hnaLogo },
  { name: "Occident", logo: occidentLogo },
  { name: "Santa Luc√≠a", logo: santaluciaLogo },
];

const serviceCategories = [
  { key: "auto", icon: "lucide:car" },
  { key: "property", icon: "lucide:home" },
  { key: "business", icon: "lucide:building-2" },
  { key: "health", icon: "lucide:heart-pulse" },
  { key: "life", icon: "lucide:shield-check" },
] as const;
---

<!-- HERO SECTION -->
<section
  class="relative min-h-[80vh] md:min-h-[85vh] flex flex-col justify-center border-b border-border overflow-hidden"
>
  <Image
    src={hero}
    alt="Hintergrund"
    class="absolute inset-0 w-full h-full object-cover z-0"
    loading="eager"
  />

  <div
    class="absolute inset-0 bg-black/60 bg-linear-to-b from-transparent to-background z-10"
  >
  </div>

  <!-- 3. EBENE: Der Inhalt (ganz oben, z-20) -->
  <Container class="relative z-20 text-center px-4 py-16 md:py-24">
    <div class="inline-flex items-center gap-2 mb-6 md:mb-8 opacity-60">
      <div class="w-6 md:w-8 h-px bg-secondary"></div>
      <span class="text-sm font-bold uppercase tracking-[0.2em] text-white">
        {t.hero.label}
      </span>
      <div class="w-6 md:w-8 h-px bg-secondary"></div>
    </div>

    <h1
      class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-serif text-white mb-6 md:mb-8 tracking-tight leading-tight max-w-4xl mx-auto"
    >
      {t.hero.headline}
    </h1>

    <p
      class="text-base sm:text-lg md:text-xl text-text-muted max-w-3xl mx-auto font-light leading-relaxed px-4"
    >
      {t.hero.subheadline}
    </p>

    <div class="mt-10 md:mt-14">
      <a
        href="#benefits"
        class="inline-flex flex-col items-center gap-2 text-text-muted hover:text-white transition-colors"
      >
        <span class="text-sm uppercase tracking-widest">{t.hero.cta}</span>
        <Icon
          name="lucide:arrow-down"
          class="w-5 md:w-6 h-5 md:h-6 animate-bounce"
        />
      </a>
    </div>
  </Container>
</section>

<!-- BENEFITS SECTION -->
<section id="benefits" class="py-16 md:py-24 border-b border-border">
  <Container>
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-serif text-white mb-4">
        {t.benefits.title}
      </h2>
      <div class="w-16 h-1 bg-secondary mx-auto"></div>
    </div>

    <div
      class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-5xl mx-auto"
    >
      <!-- Advice -->
      <div class="bg-surface/30 p-6 md:p-8 border border-border rounded-sm">
        <div class="flex items-start gap-4">
          <div class="p-2.5 bg-secondary/10 rounded-sm shrink-0">
            <Icon name="lucide:users" class="w-6 h-6 text-secondary" />
          </div>
          <div>
            <h3 class="text-lg md:text-xl font-serif text-white mb-2">
              {t.benefits.items.advice.title}
            </h3>
            <p class="text-text-muted text-sm md:text-base leading-relaxed">
              {t.benefits.items.advice.desc}
            </p>
          </div>
        </div>
      </div>

      <!-- Savings -->
      <div class="bg-surface/30 p-6 md:p-8 border border-border rounded-sm">
        <div class="flex items-start gap-4">
          <div class="p-2.5 bg-secondary/10 rounded-sm shrink-0">
            <Icon name="lucide:piggy-bank" class="w-6 h-6 text-secondary" />
          </div>
          <div>
            <h3 class="text-lg md:text-xl font-serif text-white mb-2">
              {t.benefits.items.savings.title}
            </h3>
            <p class="text-text-muted text-sm md:text-base leading-relaxed">
              {t.benefits.items.savings.desc}
            </p>
          </div>
        </div>
      </div>

      <!-- Claims -->
      <div class="bg-surface/30 p-6 md:p-8 border border-border rounded-sm">
        <div class="flex items-start gap-4">
          <div class="p-2.5 bg-secondary/10 rounded-sm shrink-0">
            <Icon name="lucide:file-check" class="w-6 h-6 text-secondary" />
          </div>
          <div>
            <h3 class="text-lg md:text-xl font-serif text-white mb-2">
              {t.benefits.items.claims.title}
            </h3>
            <p class="text-text-muted text-sm md:text-base leading-relaxed">
              {t.benefits.items.claims.desc}
            </p>
          </div>
        </div>
      </div>

      <!-- Independence -->
      <div class="bg-surface/30 p-6 md:p-8 border border-border rounded-sm">
        <div class="flex items-start gap-4">
          <div class="p-2.5 bg-secondary/10 rounded-sm shrink-0">
            <Icon name="lucide:scale" class="w-6 h-6 text-secondary" />
          </div>
          <div>
            <h3 class="text-lg md:text-xl font-serif text-white mb-2">
              {t.benefits.items.independence.title}
            </h3>
            <p class="text-text-muted text-sm md:text-base leading-relaxed">
              {t.benefits.items.independence.desc}
            </p>
          </div>
        </div>
      </div>
    </div>
  </Container>
</section>

<!-- INSURERS SECTION -->
<section class="py-16 md:py-24 border-b border-border bg-surface/10">
  <Container>
    <div class="text-center mb-10 md:mb-14">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-serif text-white mb-3">
        {t.insurers.title}
      </h2>
      <p class="text-text-muted text-base md:text-lg">
        {t.insurers.subtitle}
      </p>
    </div>

    <div
      class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 md:gap-6 max-w-4xl mx-auto mb-10"
    >
      {
        insurerLogos.map((insurer) => (
          <div class="bg-white rounded-sm p-3 md:p-4 flex items-center justify-center aspect-[3/2] hover:shadow-lg transition-shadow">
            <Image
              src={insurer.logo}
              alt={insurer.name}
              class="max-h-10 md:max-h-12 w-auto object-contain"
              loading="lazy"
            />
          </div>
        ))
      }
    </div>

    <div class="text-center">
      <a
        href={getTranslatedPath("insurers", lang)}
        class="inline-flex items-center gap-2 text-secondary hover:text-white text-sm font-medium uppercase tracking-wider transition-colors"
      >
        {t.insurers.cta}
        <Icon name="lucide:arrow-right" class="w-4 h-4" />
      </a>
    </div>
  </Container>
</section>

<!-- SERVICES SECTION -->
<section class="py-16 md:py-24 border-b border-border">
  <Container>
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-serif text-white mb-4">
        {t.services.title}
      </h2>
      <div class="w-16 h-1 bg-secondary mx-auto"></div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 md:gap-6">
      {
        serviceCategories.map((category) => {
          const service = t.services[category.key];
          return (
            <div class="bg-surface/30 p-5 md:p-6 border border-border rounded-sm text-center hover:bg-surface/50 transition-colors">
              <div class="inline-flex p-3 bg-secondary/10 rounded-sm mb-4">
                <Icon name={category.icon} class="w-6 h-6 text-secondary" />
              </div>
              <h3 class="text-base md:text-lg font-serif text-white mb-3">
                {service.title}
              </h3>
              <ul class="space-y-1.5 text-sm text-text-muted">
                {service.items.map((item: string) => (
                  <li>{item}</li>
                ))}
              </ul>
            </div>
          );
        })
      }
    </div>
  </Container>
</section>

<!-- FINAL CTA -->
<section class="py-16 md:py-24 lg:py-32 bg-background text-center">
  <Container>
    <h2
      class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-serif text-white mb-8 md:mb-10 px-4"
    >
      {t.cta.text}
    </h2>
    <a
      href={getTranslatedPath("contact", lang)}
      class="inline-block px-8 md:px-10 py-3 md:py-4 bg-white text-background text-sm md:text-base font-bold uppercase tracking-widest hover:bg-secondary hover:text-white transition-all duration-300"
    >
      {t.cta.btn}
    </a>
  </Container>
</section>
