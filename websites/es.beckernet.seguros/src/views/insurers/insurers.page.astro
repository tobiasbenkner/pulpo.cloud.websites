---
import { Image } from "astro:assets";
import Container from "@/components/ui/Container.astro";
import PageHeader from "@/components/ui/PageHeader.astro";
import type { InsurersTranslations } from "./insurers.i18n";
import { getTranslatedPath } from "@/lib/registry";
import type { Language } from "@/lib/i18n";

// Import all insurer logos
import allianzLogo from "@/assets/insurers/allianz.png";
import asisaLogo from "@/assets/insurers/asisa.png";
import axaLogo from "@/assets/insurers/axa.jpg";
import divinaLogo from "@/assets/insurers/divina.png";
import dkvLogo from "@/assets/insurers/dkv.webp";
import euroinsLogo from "@/assets/insurers/euroins.webp";
import fiatcLogo from "@/assets/insurers/fiatc.webp";
import generaliLogo from "@/assets/insurers/generali.png";
import hiscoxLogo from "@/assets/insurers/hiscox.png";
import life5Logo from "@/assets/insurers/life5.png";
import mapfreLogo from "@/assets/insurers/mapfre.png";
import mutuaPropietariosLogo from "@/assets/insurers/mutua-propietarios.png";
import hnaLogo from "@/assets/insurers/hna.webp";
import occidentLogo from "@/assets/insurers/occident.webp";
import santaluciaLogo from "@/assets/insurers/santalucia.png";

interface Props {
  lang: Language;
  t: InsurersTranslations;
}

const { t, lang } = Astro.props;

const insurersList = [
  { key: "allianz" as const, logo: allianzLogo },
  { key: "asisa" as const, logo: asisaLogo },
  { key: "axa" as const, logo: axaLogo },
  { key: "divina" as const, logo: divinaLogo },
  { key: "dkv" as const, logo: dkvLogo },
  { key: "euroins" as const, logo: euroinsLogo },
  { key: "fiatc" as const, logo: fiatcLogo },
  { key: "generali" as const, logo: generaliLogo },
  { key: "hiscox" as const, logo: hiscoxLogo },
  { key: "life5" as const, logo: life5Logo },
  { key: "mapfre" as const, logo: mapfreLogo },
  { key: "mutuaPropietarios" as const, logo: mutuaPropietariosLogo },
  { key: "hna" as const, logo: hnaLogo },
  { key: "occident" as const, logo: occidentLogo },
  { key: "santalucia" as const, logo: santaluciaLogo },
];
---

<PageHeader
  label={t.hero.label}
  title={t.hero.headline}
  description={t.seo.description}
/>

<section class="py-12 md:py-16 lg:py-20">
  <Container>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
      {
        insurersList.map((insurer) => {
          const data = t.insurers[insurer.key];
          return (
            <div class="bg-surface/30 border border-border rounded-sm p-6 md:p-8 hover:bg-surface/50 transition-colors">
              <div class="h-20 md:h-24 flex items-center justify-center mb-5 md:mb-6 bg-white rounded-sm p-4">
                <Image
                  src={insurer.logo}
                  alt={data.name}
                  class="max-h-full max-w-full w-auto object-contain"
                  loading="lazy"
                />
              </div>
              <h3 class="text-lg md:text-xl font-serif text-white mb-3">
                {data.name}
              </h3>
              <p class="text-sm md:text-base text-text-muted leading-relaxed">
                {data.description}
              </p>
            </div>
          );
        })
      }
    </div>
  </Container>
</section>

<!-- CTA Section -->
<section class="py-16 md:py-24 border-t border-border">
  <Container class="text-center">
    <h2 class="mb-8 md:mb-10 font-serif text-3xl md:text-4xl lg:text-5xl">
      {t.cta.text}
    </h2>
    <a
      href={getTranslatedPath("contact", lang)}
      class="inline-block border border-secondary text-secondary px-8 md:px-10 py-3 md:py-4 text-xs md:text-sm font-bold tracking-widest uppercase hover:bg-secondary hover:text-background transition-all duration-300"
    >
      {t.cta.btn}
    </a>
  </Container>
</section>
